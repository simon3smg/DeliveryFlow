
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <title>DeliveryFlow</title>
    
    <!-- ERROR TRAP: Displays startup errors on screen -->
    <script>
      window.addEventListener('error', function(event) {
        const root = document.getElementById('root');
        if (root) {
          // Only show if root is still empty/loading
          if (root.innerText.includes('Loading')) {
             root.innerHTML = `
                <div style="color: #ef4444; padding: 20px; font-family: system-ui; text-align: center; max-width: 600px; margin: 0 auto;">
                <h2 style="font-size: 1.2rem; font-weight: bold; margin-bottom: 10px;">Application Error</h2>
                <p style="background: #fee2e2; padding: 10px; border-radius: 8px; display: inline-block; font-family: monospace; font-size: 0.9rem;">${event.message}</p>
                <p style="font-size: 0.8rem; color: #666; margin-top: 10px;">Check console for details.</p>
                </div>
            `;
          }
        }
      });
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
            },
            padding: {
              'safe': 'env(safe-area-inset-bottom)'
            }
          }
        }
      }
    </script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Leaflet Map CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <!-- Leaflet Map JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    
    <style>
      body {
        font-family: 'Inter', sans-serif;
        background-color: #f8fafc; /* Slate 50 */
      }
      /* Dark mode body override */
      html.dark body {
        background-color: #020617; /* Slate 950 */
        color: #f8fafc;
      }
      /* Custom scrollbar */
      ::-webkit-scrollbar { width: 6px; height: 6px; }
      ::-webkit-scrollbar-track { background: transparent; }
      ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
      ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
      html.dark ::-webkit-scrollbar-thumb { background: #475569; }
      html.dark ::-webkit-scrollbar-thumb:hover { background: #64748b; }
      
      @media print {
        .no-print { display: none !important; }
        .print-only { display: block !important; }
        body { background: white; color: black; }
        .break-before-page { page-break-before: always; }
      }
      .leaflet-default-icon-path {
        background-image: url(https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png);
      }

      /* Mobile Optimizations */
      @media screen and (max-width: 768px) {
        input, select, textarea {
          font-size: 16px !important; /* Prevent iOS zoom */
        }
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@18.2.0",
    "react-dom/client": "https://aistudiocdn.com/react-dom@18.2.0/client",
    "react-dom": "https://aistudiocdn.com/react-dom@18.2.0",
    "lucide-react": "https://aistudiocdn.com/lucide-react@0.263.1",
    "react-router-dom": "https://aistudiocdn.com/react-router-dom@6.22.0",
    "@google/genai": "https://aistudiocdn.com/@google/genai@1.30.0",
    "firebase/app": "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js",
    "firebase/auth": "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js",
    "firebase/firestore": "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js",
    "firebase/analytics": "https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics.js",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "firebase/": "https://aistudiocdn.com/firebase@^12.6.0/"
  }
}
</script>
</head>
  <body class="text-slate-900 antialiased overflow-hidden">
    <div id="root" class="flex h-screen w-full items-center justify-center bg-slate-50 text-indigo-600">
        <!-- Initial Loader -->
        <div class="flex flex-col items-center gap-4">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div>
            <p class="font-medium animate-pulse">Loading DeliveryFlow...</p>
        </div>
    </div>
  </body>
</html>